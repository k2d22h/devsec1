DevSecOps Demo Repository

Опис
- Імпорт уразливого прикладу коду (`src/41_scan_stream_default.py`).
- Автоматична збірка та реліз через GitHub Actions.
- Підпис артефакту за допомогою Cosign (keyless OIDC).
- Генерація SBOM (Syft) та перевірка SBOM (Grype).
- Перевірка безпеки репозиторію (OpenSSF Scorecard).
- Гілки `dev`, `stage`, `main` з політикою внесення змін лише через Merge Request в `main`.

Алгоритм виконання (Devops)
1) Підготовка репозиторію
   - Створити на GitHub публічний репозиторій.
   - Клонувати локально та додати файли з цього прикладу.
   - Додати чотирьох користувачів до репозиторію через Settings → Collaborators; лише одному надати право push у `main` або повністю заборонити прямий push через Branch protection (рекомендовано).

2) Гілки та політики
   - Створити гілки: `dev`, `stage`, `main`.
   - Увімкнути Branch protection для `main`:
     - Require a pull request before merging.
     - Require status checks to pass (build, scorecard, grype).
     - Restrict who can push.

3) Збірка і реліз
    - Пайплайн GitHub Actions:
     - Завантаження коду (Checkout) -> Налаштування Python-середовища -> Збірка артефакту («псевдобінаря») через `make build`.
 • Встановлюється версія Python (наприклад, 3.11), а також залежності, якщо вони є.
 • Це дозволяє виконати make build і подальші кроки аналізу.
 • Збірка артефакту («псевдобінаря»)
 • Виконується команда make build, яка створює zip-архів (або інший формат), що містить вихідний код.
 • Цей архів є результатом збірки, який буде опубліковано у релізі.
 
     - Генерація SBOM (Syft) → Перевірка SBOM на вразливості Grype -> підпис артефакту Cosign (keyless) → завантаження у реліз 1.0.0.
 • Використовується Syft, який аналізує репозиторій або зібраний артефакт і створює файли SBOM (наприклад, sbom.json).
 • SBOM містить перелік усіх залежностей і використаних компонентів.
 • Перевірка SBOM на вразливості. Виконується Grype, який перевіряє SBOM на відомі CVE та може зупинити пайплайн, якщо знайдено критичні проблеми (політика визначається командою).
 • Підпис артефакту (Cosign, без ключів — Keyless Signing)Cosign через OIDC GitHub Actions підписує зібраний артефакт і SBOM.

У реліз додаються:
	•	zip-архів (build-артефакт),
	•	файл SBOM,
	•	підпис Cosign та сертифікат.
     - Збереження build-артефактів .
Пайплайн зберігає результати (артефакти збірки, SBOM) як artifacts, щоб команда могла завантажити їх безпосередньо з CI.

	
4) Перевірки безпеки
   - OpenSSF Scorecard: workflow запускається на `push`/`schedule`, публікує результати як артефакти.
   - Grype: запускається на `push`/`pull_request`, сканує SBOM і фейлить білд у разі критичних вразливостей (політика за потребою).


Локальні команди 
```bash
git init
git branch -M main
mkdir -p src
# завантажити файл у src/41_scan_stream_default.py
make build
```

Реліз 1.0.0
- Створіть тег `v1.0.0` і пушніть у репозиторій. Пайплайн збере артефакт, підпише Cosign, додасть SBOM і створить GitHub Release.

Перевірки
- Scorecard запускається автоматично.
- Grype запускається автоматично і перевіряє SBOM.


